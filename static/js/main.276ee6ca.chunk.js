(this.webpackJsonpmessagingapp=this.webpackJsonpmessagingapp||[]).push([[0],{115:function(e,t,a){},116:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(10),l=a.n(c),i=a(15),o=a(44),s=a(24),u=a(25),m=a(29),d=a(27),p=a(45),h=a(14),E=a(9),f=a(154),b={USER_AUTHENTICATED:"USER_AUTHENTICATED",USER_DISCONNECTED:"USER_DISCONNECTED",GET_USER:"GET_USER",MESSAGE_ADDED:"MESSAGE_ADDED",ADD_COMMENT:"ADD_COMMENT",CHANNEL_CHANGE:"CHANNEL_CHANGE",CHANNEL_ADD:"CHANNEL_ADD",CHANNEL_LIST:"CHANNEL_LIST"},g=function(){return{type:b.USER_AUTHENTICATED,payload:{authenticated:!0}}},v=function(e){return{type:b.CHANNEL_LIST,payload:{channels:e}}},N=function(e){return{type:b.MESSAGE_ADDED,payload:{messages:e}}},y=a(37),C=a(46),O=a.n(C),j={apiKey:"AIzaSyAHzS-BpuOpzmNVs6fcyGwP5_9C-38tx-g",authDomain:"classroomchatter-a7f90.firebaseapp.com",databaseURL:"https://classroomchatter-a7f90.firebaseio.com",projectId:"classroomchatter-a7f90",storageBucket:"classroomchatter-a7f90.appspot.com",messagingSenderId:"416988184247",appId:"1:416988184247:web:e25ee91765ef93607ed732",measurementId:"G-CR305YY5T9"};O.a.initializeApp(j);var S=O.a,w=O.a.firestore();function D(e){return w.collection("users").add(Object(E.a)({},e))}function I(){return new Promise((function(e,t){w.collection("channels").get().then((function(t){return e(t)}))}))}function A(){return new Promise((function(e,t){w.collection("messages").orderBy("dateCreated","desc").get().then((function(t){return e(t)}))}))}var x=function(){var e=Object(n.useState)([]),t=Object(y.a)(e,2),a=t[0],c=t[1],l=Object(i.c)(),o=Object(i.d)();Object(n.useEffect)((function(){I().then((function(e){var t=[];e.forEach((function(e){t.push(Object(E.a)(Object(E.a)({},e.data()),{},{docId:e.id}))})),c(t)}))}),[]);var s=function(e){l(function(e){return{type:b.CHANNEL_CHANGE,payload:{channel:e}}}(e)),console.log(o.getState().channels.selectedChannel.docId)};return r.a.createElement("div",{className:"channel-display"},r.a.createElement("div",{className:"channel-header"},r.a.createElement("span",null,"Create a channel"),r.a.createElement("span",{className:"create-channel-button custom-button"},"+")),a.map((function(e){return r.a.createElement("div",{key:e.docId,className:e.docId!==o.getState().channels.selectedChannel.docId?"channel-select-button-active custom-button":"channel-select-button custom-button",onClick:function(){return s(e)}},e.name)})))},_=function(e){return r.a.createElement("div",{className:"message-card"},r.a.createElement("h3",{className:"message-title"},e.username),r.a.createElement("h5",{className:"message-timestamp"},e.dateCreated),r.a.createElement("div",{className:"message-body"},e.messageBody||"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum."),r.a.createElement("input",{type:"textarea",placeholder:"Post a comment!",className:"comment-box"}),r.a.createElement("input",{type:"button",value:"Post",className:"post-button"}),r.a.createElement("input",{type:"button",value:"Like",className:"like-button"}))},T={updateMessages:N},U=Object(i.b)((function(e){return{selectedChannel:e.channels.selectedChannel,user:e.user}}),T)((function(e){var t=Object(n.useState)(""),a=Object(y.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(""),s=Object(y.a)(o,2),u=s[0],m=s[1],d=Object(i.c)();return r.a.createElement("div",{className:"message-input-box"},r.a.createElement("div",null),r.a.createElement("form",null,r.a.createElement("input",{type:"text",onChange:function(e){return m(e.target.value)}}),r.a.createElement("button",{type:"submit",onClick:function(e){e.preventDefault(),function(e){w.collection("channels").add({name:e.name,creatorId:e.uid,dateCreated:new Date,members:[],public:!0})}({name:u,uid:"dwCGwI2rwBc42CIQHS8jIJ5ZQR12"}),I().then((function(e){var t=[];e.forEach((function(e){t.push(Object(E.a)(Object(E.a)({},e.data()),{},{docId:e.id}))})),d(v(t))})),m("")}},"Test Add Channel")),r.a.createElement("form",null,r.a.createElement("input",{type:"textarea",onChange:function(e){return l(e.target.value)},value:c}),r.a.createElement("button",{type:"submit",onClick:function(t){var a,n,r;t.preventDefault(),a=c,n=e.selectedChannel,r=e.user,w.collection("messages").add({body:a,channelId:n.docId,userId:r.uid,displayName:r.displayName,dateCreated:new Date}).then((function(){console.log("new message created")})).catch((function(e){console.log("failure",e)})),A().then((function(e){var t=[];e.forEach((function(e){t.push(Object(E.a)(Object(E.a)({},e.data()),{},{docId:e.id}))})),d(N(t))})),l("")}},"Send")))})),k=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"Profile-area"},r.a.createElement("div",{className:"profile-name"},"Person's Name!!"),r.a.createElement("div",{className:"profile-name"},"@Username"),r.a.createElement("div",{className:"profile-image"}),r.a.createElement("div",{className:"profile-field-name"}," Email"),r.a.createElement("div",{className:"profile-field-value"},"email@test.com"),r.a.createElement("div",{className:"profile-field-name"},"Website"),r.a.createElement("div",{className:"profile-field-value"},"www.mytest.com"),r.a.createElement("div",{className:"profile-field-name"}," Bio"),r.a.createElement("div",{className:"profile-field-value"},"Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat"))}}]),a}(r.a.Component),H=Object(i.b)((function(e){return{user:e.user}}),{})(k),L=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,c=new Array(n),l=0;l<n;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).state={},e.displayChannelMessages=function(){var t=e.props,a=t.selectedChannel,n=t.posts,c=t.user;return n.messages.map((function(e,t){if(e.channelId===a.docId)return r.a.createElement(_,{channelId:a.docId,key:t,messageBody:e.body,username:c.displayName,docId:e.docId})}))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;A().then((function(t){var a=[];t.forEach((function(e){a.push(Object(E.a)(Object(E.a)({},e.data()),{},{docId:e.id}))})),e.props.updateMessages(a)}))}},{key:"render",value:function(){return r.a.createElement(f.a,null,r.a.createElement("div",{className:"home-container"},r.a.createElement("div",{className:"channel-container"},r.a.createElement(x,null)),r.a.createElement("div",{className:"message-container"},this.displayChannelMessages(),r.a.createElement(U,null)),r.a.createElement("div",{className:"profile-container"},r.a.createElement(H,null))))}}]),a}(r.a.Component),R={updateChannels:v,updateMessages:N},M=Object(i.b)((function(e){return{selectedChannel:e.channels.selectedChannel,posts:e.posts,user:e.user}}),R)(L),G=a(39),P=a.n(G),q=a(53),F=a(167),W=a(162),B=a(160),Y=a(164),z=a(161),J=a(166),Q=a(157),V=a(163),X=a(165),Z=a(78),K=a.n(Z),$=a(80),ee=a(158),te=a(159),ae=a(77),ne=a.n(ae);function re(e,t){return S.auth().createUserWithEmailAndPassword(e,t).catch((function(e){console.log("Sign up with email failed",e)}))}function ce(e,t){return S.auth().signInWithEmailAndPassword(e,t).catch((function(e){console.log(e)}))}function le(){var e=new S.auth.GoogleAuthProvider;return S.auth().signInWithPopup(e)}function ie(){return r.a.createElement($.a,{variant:"body2",color:"textSecondary",align:"center"},"Copyright \xa9 ",r.a.createElement(Q.a,{color:"inherit",href:"https://material-ui.com/"},"Your Website")," ",(new Date).getFullYear(),".")}var oe=Object(ee.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));var se={authenticate:g()},ue=Object(i.b)((function(e){return{authenticated:e.auth.authenticated}}),se)((function(e){var t=Object(n.useState)(null),a=Object(y.a)(t,2),c=a[0],l=a[1],o=Object(n.useState)(null),s=Object(y.a)(o,2),u=s[0],m=s[1],d=Object(i.c)(),p=Object(i.d)(),h=oe();function E(){return(E=Object(q.a)(P.a.mark((function t(a){var n;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.next=3,ce(c,u);case 3:n=t.sent,console.log(n),d(g()),console.log(p.getState(),"props => ",e);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function f(){return(f=Object(q.a)(P.a.mark((function e(t){var a;return P.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,le();case 3:a=e.sent,console.log(a);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r.a.createElement(te.a,{component:"main",maxWidth:"xs"},r.a.createElement(B.a,null),r.a.createElement("div",{className:h.paper},r.a.createElement(F.a,{className:h.avatar},r.a.createElement(K.a,null)),r.a.createElement($.a,{component:"h1",variant:"h5"},"Sign in"),r.a.createElement("form",{className:h.form,noValidate:!0,onSubmit:function(e){return E.apply(this,arguments)}},r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){l(e.target.value),console.log(e.target.value)}}),r.a.createElement(Y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){m(e.target.value)}}),r.a.createElement(z.a,{control:r.a.createElement(J.a,{value:"remember",color:"primary"}),label:"Remember me"}),r.a.createElement(W.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:h.submit},"Sign In"),r.a.createElement(ne.a,{fullwidth:"true",variant:"contained",type:"light",onClick:function(e){return f.apply(this,arguments)}}),r.a.createElement(V.a,{container:!0},r.a.createElement(V.a,{item:!0,xs:!0},r.a.createElement(Q.a,{href:"/home",variant:"body2"}," Forgot Password?")),r.a.createElement(V.a,{item:!0},r.a.createElement(Q.a,{href:"/signup",variant:"body2"},"Don't have an account? Sign Up"))))),r.a.createElement(X.a,{mt:8},r.a.createElement(ie,null)))})),me=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(ue,null))}}]),a}(r.a.Component),de=a(55),pe=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={authenticated:!1},e.handleChange=function(t){e.setState(Object(de.a)({},t.target.name,t.target.value))},e.handleSignUp=function(){var t=Object(q.a)(P.a.mark((function t(a){var n,r,c;return P.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("ding"),a.preventDefault(),t.next=4,re(e.state.email,e.state.password);case 4:if(r=S.auth().currentUser,console.log("firebase.auth().currentUser ",r),!r){t.next=13;break}return n={firstName:e.state.firstName,lastName:e.state.lastName,displayName:e.state.displayName,uid:r.uid,email:e.state.email,photoURL:r.photoURL,website:e.state.website,bio:e.state.bio},t.next=10,D(n);case 10:e.setState({authenticated:!0}),t.next=14;break;case 13:console.log("signup failed");case 14:return t.next=16,D(n);case 16:c=t.sent,console.log(c);case 18:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(u.a)(a,[{key:"render",value:function(){return this.state.authenticated?r.a.createElement(h.a,{to:"/"}):r.a.createElement("div",{className:"signup-container"},r.a.createElement("div",{className:"signup-form-container"},r.a.createElement("form",null,r.a.createElement("label",{htmlFor:"firstName"},"First Name"),r.a.createElement("input",{id:"firstName",name:"firstName",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"lastName"},"Last Name"),r.a.createElement("input",{id:"lastName",name:"lastName",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"displayName"},"Username"),r.a.createElement("input",{id:"displayName",name:"displayName",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"email"},"Email"),r.a.createElement("input",{id:"email",name:"email",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"password"},"Password"),r.a.createElement("input",{id:"password",name:"password",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"website"},"Website"),r.a.createElement("input",{id:"website",name:"website",type:"text",onChange:this.handleChange}),r.a.createElement("label",{htmlFor:"bio"},"Bio"),r.a.createElement("input",{id:"bio",name:"bio",type:"text",onChange:this.handleChange}),r.a.createElement("button",{onClick:this.handleSignUp},"Create Account"),r.a.createElement("label",null,"Already have an account?")," ",r.a.createElement("a",{href:"/login"},"sign in"))))}}]),a}(r.a.Component);var he=function(){var e=Object(i.c)();return r.a.createElement("div",{className:"nav-container"},r.a.createElement(p.b,{className:"nav-link",to:"/createChannel"},"Create Channel"),r.a.createElement(p.b,{className:"nav-link",to:"/"},"Home"),r.a.createElement("button",{className:"nav-link",onClick:function(){S.auth().signOut(),e({type:"USER_DISCONNECTED",payload:{authenticated:!1}})}},"Log Out"))},Ee=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",{className:"app-container"},r.a.createElement(he,null),this.props.authenticated?r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:M}),r.a.createElement(h.b,{path:"/login",component:M}),r.a.createElement(h.b,{path:"/signup",component:M}),r.a.createElement(h.b,{component:M})):r.a.createElement(h.d,null,r.a.createElement(h.b,{exact:!0,path:"/",component:me}),r.a.createElement(h.b,{exact:!0,path:"/login",component:me})," // TODO: change this to login page",r.a.createElement(h.b,{exact:!0,path:"/signup",component:pe}))))}}]),a}(r.a.Component),fe={updateChannels:v,updateMessages:N},be=Object(i.b)((function(e){return{authenticated:e.auth.authenticated}}),fe)(Ee),ge=(a(115),{bio:"I am the first test of Signup",displayName:"ExampleProject",email:"test@email.com",firstName:"Travis",lastName:"Heffelfinger",photoURL:null,uid:"dwCGwI2rwBc42CIQHS8jIJ5ZQR12",website:"website.com"});var ve=Object(o.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{authenticated:!0},t=arguments.length>1?arguments[1]:void 0;return t.type===b.USER_AUTHENTICATED||t.type===b.USER_DISCONNECTED?Object(E.a)(Object(E.a)({},e),{},{authenticated:t.payload.authenticated}):e},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Object(E.a)({},ge),t=arguments.length>1?arguments[1]:void 0;return t.type===b.GET_USER?Object(E.a)(Object(E.a)({},e),{},{user:t.payload.user}):e},posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{messages:[]},t=arguments.length>1?arguments[1]:void 0;return t.type===b.MESSAGE_ADDED?Object(E.a)(Object(E.a)({},e),t.payload):t.type===b.ADD_COMMENT?Object(E.a)(Object(E.a)({},e),{},{comments:t.payload}):e},channels:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{selectedChannel:{creatorId:"default",dateCreated:"00:00:00",name:"default",public:!0,members:[],docId:"6I5S8EZ6wdMEk4DRHY5b"}},t=arguments.length>1?arguments[1]:void 0;return t.type===b.CHANNEL_CHANGE?Object(E.a)(Object(E.a)({},e),{},{selectedChannel:t.payload.channel}):(t.type,e)}}),Ne=Object(o.c)(ve,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());l.a.render(r.a.createElement(i.a,{store:Ne},r.a.createElement(r.a.StrictMode,null,r.a.createElement(be,null))),document.querySelector("#root"))},90:function(e,t,a){e.exports=a(116)}},[[90,1,2]]]);
//# sourceMappingURL=main.276ee6ca.chunk.js.map